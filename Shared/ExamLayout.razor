@using Microsoft.AspNetCore.Components.Web
@inherits LayoutComponentBase
@inject IJSRuntime JSRuntime

<main>
    <article class="content px-4">
        <ErrorBoundary>
            <ChildContent>
                @Body
            </ChildContent>
            <ErrorContent Context="ex">
                <div class="alert alert-danger" role="alert">
                    <h4 class="alert-heading">An error occurred!</h4>
                    <p>Something went wrong while processing your request.</p>
                    @if (IsDebugMode)
                    {
                        <hr>
                        <p class="mb-0">@ex.ToString()</p>
                    }
                    <div class="mt-3">
                        <button class="btn btn-primary" @onclick="ReloadPage">
                            Reload Page
                        </button>
                    </div>
                </div>
            </ErrorContent>
        </ErrorBoundary>
    </article>
</main>

<RadzenNotification />
<RadzenDialog />
<RadzenTooltip />
<RadzenContextMenu />

@code {
    private bool IsDebugMode => Environment.GetEnvironmentVariable("ASPNETCORE_ENVIRONMENT") == "Development";

    private async Task ReloadPage()
    {
        try
        {
            await JSRuntime.InvokeVoidAsync("location.reload");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error reloading page: {ex.Message}");
        }
    }
}

